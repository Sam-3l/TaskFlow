{% extends 'parents/auth_base.html' %}
{% block title %}{{ user["fname"] }} | Tasks{% endblock %}

{% block content %}

<span class="sort"> Sort by&nbsp;
    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path opacity="0.5" d="M16 18L16 6M16 6L20 10.125M16 6L12 10.125" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8 6L8 18M8 18L12 13.875M8 18L4 13.875" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
</span>
<br><br>

<div class="container-fluid tasks">
    <div class="row g-3">

        {% if tasks %}
            {% for task in tasks %}
                <div class="col-md-6">
                    <div class="task">
                        <div class="options">
                            <svg fill="#fff" width="20" height="20" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.15 28.012v-0.85c0.019-0.069 0.050-0.131 0.063-0.2 0.275-1.788 1.762-3.2 3.506-3.319 1.95-0.137 3.6 0.975 4.137 2.787 0.069 0.238 0.119 0.488 0.181 0.731v0.85c-0.019 0.056-0.050 0.106-0.056 0.169-0.269 1.65-1.456 2.906-3.081 3.262-0.125 0.025-0.25 0.063-0.375 0.094h-0.85c-0.056-0.019-0.113-0.050-0.169-0.056-1.625-0.262-2.862-1.419-3.237-3.025-0.037-0.156-0.081-0.3-0.119-0.444zM20.038 3.988l-0 0.85c-0.019 0.069-0.050 0.131-0.056 0.2-0.281 1.8-1.775 3.206-3.538 3.319-1.944 0.125-3.588-1-4.119-2.819-0.069-0.231-0.119-0.469-0.175-0.7v-0.85c0.019-0.056 0.050-0.106 0.063-0.162 0.3-1.625 1.244-2.688 2.819-3.194 0.206-0.069 0.425-0.106 0.637-0.162h0.85c0.056 0.019 0.113 0.050 0.169 0.056 1.631 0.269 2.863 1.419 3.238 3.025 0.038 0.15 0.075 0.294 0.113 0.437zM20.037 15.575v0.85c-0.019 0.069-0.050 0.131-0.063 0.2-0.281 1.794-1.831 3.238-3.581 3.313-1.969 0.087-3.637-1.1-4.106-2.931-0.050-0.194-0.094-0.387-0.137-0.581v-0.85c0.019-0.069 0.050-0.131 0.063-0.2 0.275-1.794 1.831-3.238 3.581-3.319 1.969-0.094 3.637 1.1 4.106 2.931 0.050 0.2 0.094 0.394 0.137 0.588z"></path>
                            </svg>
                        </div>
                        <h2 class="tasks-header"><a href="/dashboard/tasks/{{ task['id'] }}">{{ task["title"] }}</a></h2>
                        <div class="task-description">
                            <p>{{ task['description'] }}</p>
                        </div>
                        <p></p>
                        <div class="task-attribute">
                            <span class="task-source">Source:&nbsp;<a href="{% if task['source'] %}#{% else %}/dashboard/tasks/{{ task['id'] }}{% endif %}">{% if task['source'] %}{{ task['source'] }}{% else %}Self Assigned Task{% endif %}</a></span>
                            <span class="task-date">Modified Last: {{ task["modified_last"] }}</span>
                            {% if task["status"] == 'completed' %}
                                <span class="task-deadline" style="color: lightgreen;">
                                    <svg width="15" height="15" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-1">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6563 5.24291C15.4743 5.88358 16 6.8804 16 8C16 9.11964 15.4743 10.1165 14.6562 10.7572C14.7816 11.7886 14.4485 12.8652 13.6568 13.6569C12.8651 14.4486 11.7885 14.7817 10.7571 14.6563C10.1164 15.4743 9.1196 16 8 16C6.88038 16 5.88354 15.4743 5.24288 14.6562C4.21141 14.7817 3.13481 14.4485 2.34312 13.6568C1.55143 12.8652 1.2183 11.7886 1.34372 10.7571C0.525698 10.1164 0 9.1196 0 8C0 6.88038 0.525715 5.88354 1.34376 5.24288C1.21834 4.21141 1.55147 3.13481 2.34316 2.34312C3.13485 1.55143 4.21145 1.2183 5.24291 1.34372C5.88358 0.525698 6.8804 0 8 0C9.11964 0 10.1165 0.525732 10.7572 1.3438C11.7886 1.21838 12.8652 1.55152 13.6569 2.3432C14.4486 3.13488 14.7817 4.21146 14.6563 5.24291ZM12.2071 6.20711L10.7929 4.79289L7 8.58579L5.20711 6.79289L3.79289 8.20711L7 11.4142L12.2071 6.20711Z" fill="lightgreen"/>
                                    </svg>
                                    completed
                                </span>
                            {% else %}
                                {% with deadline_from_now = today|days_diff(task['deadline']) %}
                                    <span class="task-deadline" style="{% if deadline_from_now <= 3 %}color: lightcoral;{% elif deadline_from_now <= 6 %}color: yellow;{% else %}color: lightgreen;{% endif %}">{% if task['deadline'] %}{% if deadline_from_now == 0 %}DEADLINE IS TODAY!!!{% else %}{{ deadline_from_now|absolute() }} day{% if deadline_from_now|absolute() != 1 %}s{% endif %} {% if deadline_from_now < 0 %}beyond the{% else %}to{% endif %} deadline {% endif %} &nbsp;<strong style="color:white">|</strong>&nbsp;{% endif %} 
                                    <span style="color:#0d6efd;">{{ task["status"] }}</span></span>
                                {% endwith %}
                            {% endif %}
                            <div class="task-rank"><em>{{ task['priority'] }}</em></div>
                        </div>
                    </div>
                </div>

            {% endfor %}
            
            <span style="font-size: small;">Self assigned tasks are private</span>

        {% else %}
            <div class="no-tasks-container">
                <svg viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="no-tasks-icon">
                    <radialGradient id="IconifyId17ecdb2904d178eab7645" cx="27.506" cy="32.244" r="59.836" gradientTransform="matrix(1 .0055 -.00387 .704 .125 9.394)" gradientUnits="userSpaceOnUse"><stop offset=".334" stop-color="#fff7cf"></stop><stop offset="1" stop-color="#ffdfa7"></stop></radialGradient>
                    <path d="M116.62 124.26H11.32c-4.15 0-7.52-3.37-7.52-7.52V11.44c0-4.15 3.37-7.52 7.52-7.52h105.3c4.15 0 7.52 3.37 7.52 7.52v105.3c.01 4.15-3.36 7.52-7.52 7.52z" fill="url(#IconifyId17ecdb2904d178eab7645)"></path>
                    <path d="M124.15 82.73v34.01c0 4.15-3.37 7.52-7.52 7.52H11.32c-4.15 0-7.52-3.37-7.52-7.52V79.98l120.35 2.75z" fill="#f8ab59"></path>
                    <path d="M124.15 106.09v10.65c0 4.15-3.37 7.52-7.52 7.52H78.46s-10.16-3.56-12.91-3.97s-15.16-2.44-15.67-4.38s16.99-3.87 20.35-4.17c3.36-.31 25.03-2.65 26.66-3.05c1.63-.41 6-1.83 10.99-2.14c4.99-.3 16.27-.46 16.27-.46z" fill="#f08846"></path>
                    <path d="M92.82 124.26h23.8c4.15 0 7.52-3.37 7.52-7.52v-2.35s-19.24-1.78-24.63-2.11c-5.39-.33-18.39-.47-17.47 4.57c.66 3.6 10.78 7.41 10.78 7.41z" fill="#c76933"></path>
                    <path fill="#ef8848" d="M87.14 83.53l37 .68l.01-3.28l-37.59-.38z"></path>
                    <path d="M3.79 89.72s12.7.27 15.59.66c2.89.39 7.42.78 9.83.68s16.87-1.45 22.36-1.84s10.22.77 11.57.87c1.35.1 4.63 1.16 3.76 1.73s-6.26 2.31-9.54 2.41s-9.25 1.16-13.49 1.45s-16.68.82-22.76 1.01s-17.31-.33-17.31-.33l-.01-6.64z" fill="#ef8848"></path>
                    <path d="M16.98 105.12c-.52.93 4.14 2.12 11.57 2.31c7.42.19 13.78-1.25 14.07-2.7c.29-1.45-9.27-2.58-13.22-2.58c-4.28 0-11.46 1.24-12.42 2.97z" fill="#ef8848"></path>
                    <path d="M124.14 87.98s-2.78.37-5 1.24s-6.75 1.83-6.65 2.41s4.24 1.54 6.26 2.12s5.4.61 5.4.61l-.01-6.38z" fill="#ef8848"></path>
                    <path d="M3.8 76.14l.01 7.21s12.11.96 19.92 1.15s27.37-.58 27.37-.58s-6.94-8.87-7.33-9.06s-12.61-10.28-14.06-10.28c-1.45 0-2.81 1.41-4.45 1.89c-1.64.48-8 3.08-10.79 4.43c-2.8 1.35-4.53 3.08-6.46 3.76c-1.93.68-4.21 1.48-4.21 1.48z" fill="#ef8848"></path>
                    <path d="M31.82 71.77c2.81 3.65 6.07 4.53 8 6.36c1.93 1.83 8.39 5.98 8.39 5.98l45.68-.29s-4.63-6.17-9.35-7.13s-8-.29-8-.29s-7.13-.77-12.14-1.93c-5.01-1.16-9.06-2.31-13.01-2.8s-10.6-2.31-13.4-3.57c-2.8-1.25-8-3.47-8-3.47s.19 1.35.58 2.51c.38 1.16-.68 2.13 1.25 4.63z" fill="#c76831"></path>
                    <path d="M15.64 31.6c-.2 8.25 5.82 12.47 12.44 12.78c5.13.24 12.02-3.56 12.17-11.77c.15-8.25-4.96-12.53-11.97-12.98c-5.95-.38-12.45 4.33-12.64 11.97z" fill="#ffca29"></path>
                    <path d="M72.9 56.1c-3.47.18-7.3 2.95-7.59 9.22c-.16 3.55.83 8.97.9 10.03c.16 2.53.16 10.24 1.64 13.99c1.58 4.02 3.42 5.92 5.06 6.79c1.64.87 11.87 5.98 11.87 5.98s.58 9.74.68 11.67c.1 1.93 2.99 4.15 8.1 3.67c5.11-.48 7.43-13.02 7.43-13.6c0-.58.39-16.3.39-16.3s7.04 2.12 10.42-1.54c3.38-3.67 8.3-26.34 7.24-29.33s-3.67-4.82-6.37-4.63c-2.7.19-5.11 1.64-5.79 5.98s.39 11.29.39 13.12s-.48 5.79-2.32 6.37c-1.83.58-3.47-.29-3.47-.29s1.68-32.12.81-35.49c-.87-3.38-4.38-6.57-9.3-6.09s-9.39 3.82-10.06 11.73s.51 11.13.61 15.76s.77 26.82.77 26.82s-4.92 2.6-5.79-1.93c-.87-4.53 2.22-23.54 1.25-26.53s-3.11-5.59-6.87-5.4z" fill="#8bc12d"></path>
                    <path d="M74.97 59.51c-.21.16.05 13.28.24 17.72c.19 4.44.39 11.58 4.05 14.76c2.81 2.44 5.06 1.88 5.06 1.88l-.06-5.55s-1.72 0-3.16-1.35c-1.9-1.77-1.74-7.52-1.35-11c.39-3.47.77-10.13.39-13.22c-.39-3.08-2.48-5.35-5.17-3.24z" fill="#418c1d"></path>
                    <path d="M79.75 98.86c-.2 0-.39-.07-.55-.22c-.2-.19-4.98-4.72-6.52-7.53c-2.32-4.23-2.32-10.06-2.32-12.25c0-1.06-.13-2.43-.28-4.01c-.14-1.54-.3-3.28-.4-5.21c-.2-4.04.47-6.43 1.06-8.08c.15-.42.6-1.33 1.02-1.22c.43.12.44 1.1.34 1.53c-.28 1.22-.92 3.68-.74 7.46c.09 1.9.18 3.86.32 5.38c.15 1.62.28 3.03.28 4.16c0 2.08.36 7.61 2.48 11.48c1.41 2.58 6.18 6.92 6.23 6.97c.32.3-.04.98-.34 1.3c-.16.16-.37.24-.58.24z" fill="#5f9a22"></path>
                    <path d="M102.03 82.17c-.41 0-.76-.32-.8-.74a.81.81 0 0 1 .74-.86c.05 0 4.21.14 6.29-1.68c1.54-1.34 2.12-5.66 2.06-8.71c-.02-.93-.04-1.83-.02-2.63c.09-3.6-.04-9.13-.05-9.2c-.02-.44-.37-2.46.49-2.53c.45-.03.77.63.92 1.36c.41 1.96.32 6.76.23 10.41c-.02.78 0 1.65.02 2.55c.08 3.55-.3 8.37-2.4 10.2c-2.49 2.18-7.21 1.8-7.43 1.82c-.01.01-.03.01-.05.01z" fill="#5f9a22"></path>
                    <path d="M89.59 116.43c-.53 0-.52-.71-1-.95c-.71-.35-.89-17.46-1.08-25.01c-.12-4.7-.37-11.89-.6-17.89c-.14-3.68-.37-7.07-.45-9.35c-.03-.94-.15-2.26-.18-3.21c-.19-5.21-.19-9.73.4-13.16c.69-4.06 1.27-5.09 1.95-6.32c.76-1.38 1.85-2.16 2.34-1.91c.49.25-.12 1.29-.43 2.4c-.31 1.11-.84 2.23-1.48 5.98c-.55 3.23-.77 8.46-.59 13.33c.04.95.07 1.91.1 2.86c.07 2.28.41 5.47.55 9.14c.23 6 .43 13.28.55 18c.19 7.52.91 24.85.92 25.03c.03.55-.4 1.02-.95 1.05c-.02.01-.04.01-.05.01z" fill="#5f9a22"></path>
                    <path d="M94.51 115.37c-.54 0-1.38-.8-1.39-1.35c0-.28-.09-27.19-.09-31.97c0-3.15-.38-9.85-.52-16.05c-.07-3.21-.11-8.03-.18-9.92c-.31-7.46.31-11.28.62-13.87c.07-.55.43-3.76 1.35-3.51c.78.22.63 1.29.57 3.14c-.06 1.73-.4 10.39-.3 15.79c.03 1.89.1 4.81.17 8.01c.14 6.21.31 13.24.31 16.42c0 4.76.48 32.03.48 32.3c.01.55-.43 1.01-.98 1.02c-.03-.01-.04-.01-.04-.01z" fill="#5f9a22"></path>
                    <path d="M84.55 97.25l.23 5.52s-4.32-.29-7.69-2.18c-4.38-2.47-6.85-6.11-7.71-8.07c-.23-.52 5.55 2.4 8.63 3.51c3.09 1.1 6.54 1.22 6.54 1.22z" fill="#418c1d"></path>
                    <path d="M85.43 113.22c0 .88-.03 3.9.62 4.94c.9 1.44 1.89 1.48 4.03 1.79c2.05.29 7.14.19 9.03-.31c1.31-.36 2.65-1.85 2.9-3.82c.25-1.97.09-13 .17-16.64c.07-3.64.03-7.91.03-7.91s5.87-.07 10.49-3.64s6.4-10.63 6.92-14.72s.57-15.13-1.04-17.21c-1.15-1.48-3.33-.86-3.28 1.08c.03 1.04.3 12.72-.67 17.62c-.97 4.91-1.78 7.58-4.83 9.52c-3.05 1.93-7.51 1.64-7.51 1.64s.3-19.19.82-26.18s1.04-15.24-1.26-19.19c-2.27-3.88-4.71-3.34-4.6-1.6c.03.45.94 2.22 1.26 6.35c.3 3.93.74 12.2.51 18.67c-.22 6.47-.97 17.92-1.12 28.56c-.15 10.63 1.94 19.61-2.39 21.5c-3.33 1.42-10.08-.45-10.08-.45z" fill="#378016"></path>
                </svg>
                <h2 class="no-tasks-message">Oops! You don't have any tasks.</h2>
            </div>
        {% endif %}

    </div>
</div>

<div class="fab-container">
    <a href="/dashboard/tasks/new" style="text-decoration:none;">
        <button class="fab">
            <span class="fab-icon">+</span>
        </button>
    </a>
</div>

{% endblock %}